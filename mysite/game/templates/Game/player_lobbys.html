{% load static %}

<!DOCTYPE html>
<html>
    <head>
        <meta charset='utf-8'>
        <title> Player Lobby </title>

        <meta name="author" content="Kelsey Holdgate, isaac" />
        <link rel="shortcut icon" type="image/x-icon" href="{% static 'favicon.png' %}" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'playerlobby2.css'%}">
        <link rel="stylesheet" href="{% static 'sidebar1.css'%}">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
    </head>
    <body>
        <div class="container" >
            <aside>
              <div class="top">
                <div class="logo">
                    <img src="{% static 'favicon.png'%}">
                    <h2>Task master</h2>
                </div>
                <div class="close" id="close-btn">
                  <span class="material-icons-sharp">close</span>
                </div>
              </div>
      
            <div class="sidebar">
              <a href="/home/">
                <span class="material-icons-sharp">person_outline</span>
                <h3>Home</h3>
              </a>
              <a href="/game/" class="active">
                <span class="material-icons-sharp">sports_esports</span>
                <h3>Game</h3>
              </a>
              <a href="/game/create_lobby">
                <span class="material-icons-sharp">add_business</span>
                <h3>Create Lobby</h3>
              </a>
              <a href="/game/player_lobbys" >
                <span class="material-icons-sharp">view_list</span>
                <h3>View Lobby</h3>
              </a>
              <a href="/logout/">
                <span class="material-icons-sharp">logout</span>
                <h3>Logout</h3>
              </a>
            </div>
            </aside>
            <main>
              <div class="display">
                <div class="title">Lobby List:</div>
                <div class="grid-titles">
                  <div class="lobby-name right-margin" style="grid-column: 1; margin-right: 12.5px">Name</div>
                  <div class="lobby-name right-margin" style="grid-column: 2; margin-right: 5px;">Code </div>
                  <div class="lobby-name right-margin" style="grid-column: 3; margin-right: 10px">Players</div>
                  <div class="lobby-name right-margin" style="grid-column: 4">State</div>
                </div>
                {% if lobby_list %}
                <ul>
                  {% for lobby in lobby_list %}
                  <li>
                    <div class="lobby-name right-margin">{{lobby.game_name}}</div>
                    <div class="lobby-code right-margin">{{lobby.game_code}}</div>
                    <div class="lobby-rounds right-margin">{{lobby.hosting_group.all_members|length}}/{{lobby.hosting_group.max_players}}</div>

                    {% if lobby.game_state == 0 %}
                      <div class="lobby-state right-margin"> Waiting </div>
                    {% else %}
                      <div class="lobby-state right-margin"> Playing </div>
                    {% endif %}

                    <div class="join-button"><a class="cell" href="{% url 'game:lobby_view' game_code=lobby.game_code %}"><button>Join</button></a></div>

                  </li>
                  {% endfor %}
                </ul>
                {% else %}
                <p>You don't have any active lobbies</p>
                {% endif %}
              </div>
            </main>
            <div class="right">
              <div class="top">
                <button id="menu-btn">
                  <span class="material-icons-sharp">menu</span>
                </button>
                <div class="profile">
                  <div class="info">
                    {% csrf_token %}
                    <h3>{{username}}</h3>
                  </div>
                </div>
              </div>
          </div>
        </div>
    </body>
</html>